데이터베이스의 기본
=
- 데이터베이스(DataBase)는 일정한 규칙, 혹은 규약을 통해 구조화되어 저장되는 데이터의 모음입니다.
- 해당 데이터베이스를 제어, 관리하는 통합 시스템은 DBMS(DataBase Management System)라고 하며, 데이터베이스 안에 있는 데이터들은 특정 DBMS마다 정의된 쿼리 언어(query language)를 통해 삽입, 삭제, 수정, 조회 등을 수행할 수 있습니다.
- 데이터베이스는 실시간 접근과 동시 공유가 가능합니다.
- 엔터티
  - 엔터티(entity)는 사람, 장소, 물건, 사건, 개념 등 여러 개의 속성을 지닌 명사를 의미합니다.
  - 약한 엔터티와 강한 엔터티
    - A가 혼자서는 존재하지 못하고 B의 존재 여부에 따라 종속적이라면 A는 약한 엔터티 B는 강한 엔터티입니다.
- 릴레이션
  - 릴레이션(relation)은 데이터베이스에서 정보를 구분하여 저장하는 기본 단위입니다.
  - 엔터티에 관한 데이터를 데이터베이스는 릴레이션 하나에 담아 관리합니디.
  - 관계형 데이터베이스에서는 '테이블'이라고 합니다.
  - NoSQL에서는 '컬렉션'이라고 합니다.
  - 테이블과 컬렉션
    - 데이터베이스의 종류는 크게 '관계형 데이터베이스'와 NoSQL로 나눌 수 있습니다.
    - 관계형 데이터베이스의 대표적인 MySQL은 레코드-테이블-데이터베이스로 이루어져 있습니다.
    - NoSQL의 대표적인 MongoDB 데이터베이스의 구조는 도큐먼트-컬렉션-데이터베이스로 이루어져 있습니다.
  - 레코드가 쌓여 테이블이 되고 테이블이 쌓여 데이터베이스가 됩니다.
- 속성
  - 속성(attribute)은 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보입니다.
  - 서비스의 요구 사항을 기반으로 관리해야 할 필요가 있는 속성들만 엔터티의 속성이 됩니다.
- 도메인
  - 도메인(domain)은 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합을 말합니다.
- 필드와 레코드
  - 데이터베이스에서 필드와 레코드로 구성된 테이블을 만들 수 있습니다.
  - 예를 들면 member라는 테이블로 속성이 이름, 아이디 등을 가지고 있습니다. 여기에서 name, id 등과 같은 필드를 가지고 테이블에 쌓이는 행(row)의 단위를 레코드라고 합니다.
  - 레코드를 튜플이라고도 합니다.
  - 필드 타입
    - 필드는 타입을 갖습니다. 이름이면 문자열, 전화번호면 숫자와 같은 타입이 됩니다.
    - 숫자 타입
      - TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT 등이 있습니다.
    - 날짜 타입
      - DATE, DATETIME, TIMESTAMP 등이 있습니다.
      - DATE : 날짜부분은 있고 시간부분이 없는 값에 사용됩니다. 지원되는 범위는 1000-01-01 ~ 9999-12-31까지이고 3바이트의 용량을 가집니다.
      - DATETIME : 날짜 및 시간을 전부 포함하는 값에 사용됩니다. 1000-01-01 00:00:01 ~ 9999-12-31 23:59:59 까지 표현되며 8바이트의 용량을 가집니다.
      - TIMESTAMP : 날짜 및 시간 부분을 전부 포함하는 값에 사용됩니다. 1970-01-01 00:00:01 ~ 2038-01-19 03:14:07 까지 표현되며 4바이트의 용량을 가집니다.
    - 문자 타입
      - CHAR, VARCHAR, TEXT, BLOB, ENUM, SET 등이 있습니다.
      - CHAR와 VARCHAR
        - 타입 옆에 글자 수를 같이 기입 해줍니다. ex)CHAR(30)
        - CHAR은 테이블을 생성할 때 선언한 길이로 고정되며 길이는 0~255 사이의 값을 가집니다. 레코드를 저장할 때 무조건 선언한 길이 값으로 '고정'해서 저장됩니다.
        - VARCHAR는 가변 길이 문자열입니다. 길이는 0~65535 사이의 값으로 지정할 수 있고 입력된 데이터의 길이에 따라 용량을 가변시켜 저장합니다.
      - TEXT와 BLOB
        - 두 타입 모두 큰 데이터를 저장할 때 쓰는 타입입니다.
        - TEXT는 큰 문자열 저장에 쓰며 주로 게시판의 본문을 저장할 때 사용됩니다.
        - BLOB는 이미지, 동영상 등 큰 데이터 저장에 씁니다. 그러나 보통은 아마존의 이미지 호스팅 서비스인 S3를 이용하는 등 서버에 파일을 올리고 파일에 관한 경로를 VARCHAR로 저장합니다.
      - ENUM과 SET
        - ENUM은 ENUM('x-small', 'small', 'medium', 'large', 'x-large')의 형태이며, 이 중에서 하나만 선택하는ㅌ 단일 선택만 가능하고 ENUM리스트에 없는 경우 빈 문자열이 대신 사용됩니다.
        - ENUM을 이용하면 'x-small' 등이 0, 1 등으로 매핑되어 메모리를 적게 사용한다는 장점이 있습니다.
        - ENUM은 최대 65535개의 요소를 넣을 수 있습니다.
        - SET은 ENUM과 비슷하지만 여러 개의 데이터를 선택할 수 있고 비트 단위의 연산을 할 수 있으며 최대 64개의 요소를 집어넣을 수 있다는 점이 다릅니다.
        - ENUM이나 SET의 사용은 공간적인 이점이 있겠지만, 애플리케이션의 수정에 따라 데이터베이스의 ENUM이나 SET의 목록 또한 수정해야 한다는 단점이 있습니다.
- 관계
  - 데이터베이스에 테이블은 하나만 있는 것이 아닌 여러 개의 테이블이 있으며 테이블은 서로 관계가 정의 되어 있습니다.
  - 1:1 관계
    - 예를 들면 유저당 유저 이메일은 한 개씩 있는 경우를 생각하면 1:1 관계가 됩니다.
    - 1:1 관계는 테이블을 두 개의 테이블로 나눠 테이블의 구조를 더 이해하기 쉽게 만들어 줍니다.
  - 1:N 관계
    - 예를 들면 장바구니를 생각해보면 한 유저당 여러 개의 상품을 담을 수 있습니다. 이 경우 1:N의 관계가 됩니다.
    - 한 개체가 다른 많은 개체를 포함하는 관계를 말합니다.
  - N:M 관계
    - 학생과 강의의 관계를 생각해보면 학생도 여러 개의 강의를 들을 수 있고 강의를 듣는 학생도 여러 명인 경우 N:M 관계가 됩니다.
    - N:M 관계 테이블은 두 개를 직접적으로 연결해서 구축하지 않고, 1:N과 1:M이라는 관계를 갖는 테이블 두 개로 나눠서 설정합니다.
- 키
  - 테이블 간의 관계를 조금 더 명확하게 하고 테이블 자체의 인덱스를 위해 설정된 장치로 <strong>기본키, 외래키, 후보키, 슈퍼키, 대체키</strong>가 있습니다.
  - 슈퍼키는 유일성을 갖고 그 안에 포함된 후보키는 최소성까지 갖춘 키입니다. 후보키 중 기본키로 선택되지 못한 키는 대체키가 됩니다.
  - 유일성이란 중복되는 값이 없는 것을 말합니다.
  - 최소성이란 필드를 조합하지 않고 최소 필드만 써서 키를 형성할 수 있는 것을 말합니다.
  - 기본키
    - 기본키(Primary Key)는 줄여 PK 또는 프라이머리키라고 부르며, 유일성과 최소성을 만족하는 키입니다.
    - 기본키는 자연키 또는 인조키 중에 골라 설정합니다.
    - 자연키
      - 중복된 값들을 제외하며 중복되지 않는 것을 '자연스레' 뽑는 키를 자연키라고 합니다.
      - 자연키는 언젠가는 변하는 속성을 가집니다.
    - 인조키
      - 테이블에 인위적으로 식별자를 부여하여 만드는 키입니다.
      - 자연키와는 대조적으로 변하지 않는 속성을 가집니다. 그렇기 때문에 보통 기본키는 인조키로 설정합니다.
  - 외래키
    - 외래키는 중복되어도 괜찮습니다.
    - 다른 테이블의 필드를 참조하는 키입니다.
  - 후보키
    - 후보키(candidate key)는 기본키가 될 수 있는 후보들이며 유일성과 최소성을 동시에 만족하는 키입니다.
  - 대체키
    - 대체키(alternate key)는 후보키가 두 개 이상일 경우 어느 하나를 기본키로 지정하고 남은 후보키를 말합니다.
  - 슈퍼키
    - 슈퍼키(super key)는 각 레코드를 유일하게 식별할 수 있는 유일성을 갖춘 키입니다.